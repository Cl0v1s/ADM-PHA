<app-dm>
  <div class="main_section">
    <div class="ui container">
      <div class="ui grid photoatdmhead">
        <div class="four wide column">
          <div class="namedmat">
              <p id="nomdmat">
              { dm.name }
              </p>
              <p if="{ dm.type == 0 || dm.type == '0' }"  href="#dm/{dm.id}" class="button add">Dispositif médical</p>
              <p if="{ dm.type == 1 || dm.type == '1' }"  href="#at/{dm.id}" class="button add">Aide technique</p>
        </div>
      </div>
      <div class="twelve wide column" id="no_padding">
              <img id="dmpicture" src="{ dm.picture }">
      </div>
      </div>
    </div>
  </div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column">
    <div class="description">
        <h3>Description</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/desc.png"/>
        </div>
        <span class="divider"></span>
      </div>
    </div>
      <div class="twelve wide column">
            <p>
                { dm.description }
            </p>
        </div>
    </div>
  </div>
</div>
</div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column">
    <div class="autonomy">
      <h3>Degré d'autonomie</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/autonomy.png"/>
        </div>
      </div>
      <span class="divider"></span>

    </div>

    <div class="twelve wide column">
            <p>
                { dm.autonomy }
            </p>
        </div>
    </div>
  </div>
</div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column">
    <div class="guide">
      <h3>Guide d'utilisation</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/conseils.png"/>
        </div>
      </div>
      <span class="divider"></span>

    </div>

    <div class="twelve wide column">
            <p>
                { dm.guide }
            </p>
        </div>
      </div>
    </div>
  </div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column">
    <div class="invasive">
      <h3>Caractère invasif</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/invasif.png"/>
        </div>
      </div>
      <span class="divider"></span>

    </div>

        <div class="twelve wide column">
            <p>
                { dm.invasive }
            </p>
        </div>
    </div>
  </div>
</div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column">
    <div class="advantages">
      <h3>Avantages et inconvénients</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/inconv.png"/>
        </div>
      </div>
      <span class="divider"></span>

    </div>

    <div class="twelve wide column">
            <p>
                { dm.advantages }
            </p>
        </div>
    </div>
  </div>
</div>

<div class="main_section">
<div class="ui container dmat">
  <div class="ui grid photoatdm">
    <div class="four wide column ">
    <div class="market">
      <h3>Fabricants / prix</h3>
        <div class="img">
          <img alt="" src="../../static/IMG/price.png"/>
        </div>
      </div>
      <span class="divider"></span>

    </div>
    <div class="twelve wide column"  >
            <div>
                <p><label>Prix moyen</label></p>
                <p>{ dm.price }</p>
            </div>
            <div>
                <p><label>Fabricants</label></p>
                <p>
                    <!--TODO: ajouter les informations sur les fabricants -->
                </p>
            </div>
        </div>
    </div>
  </div>
</div>

    <div if="{ dm.comments != null }" class="comments">
        <h2>Commentaires</h2>
        <app-commentEditForm if="{ resident != null}" resident="{ resident }" dm="{ dm }" callback="{ afterComment }" ></app-commentEditForm>
        <app-comments comments="{ dm.comments }"></app-comments>
    </div>


    <script>
        var tag = this;

        tag.dm = null;
        tag.resident = null;

        tag.on("before-mount", function(){
            tag.dm = tag.opts.dm;
            if(tag.dm == null)
                throw new Error("DM cant be null.");
            tag.resident = tag.opts.resident;
        });

        tag.afterComment = function(comment)
        {
            if(dm.comments == null)
                return;
            dm.comments.push(comment);
            tag.update();
        }

    </script>
</app-dm>
