<app-residents>
    <app-header></app-header>

    <div id="imagelistresidents">
    </div>

    <div class="main_section">
    <div class="ui container">
      <div class="ui category search">
        <div class="ui icon input">
              <input list="residents" class="awesomplete" type="text" placeholder="Rechercher un dispositif mÃ©dical..." ref="search"/>
          <i class="search icon" ></i>
        </div>
      </div>

    <app-residentlist residents="{ residents }"></app-residentlist>
    <script>
        var tag = this;

        tag.residents = null;

        tag.on("before-mount", function(){
            tag.residents = tag.opts.residents;
            if(tag.residents == null)
                throw new Error("Residents cant be null.");
        });

        tag.search = function()
        {
            var names = tag.refs.search.value.split(" ");
            var filters = "";
            for(var i = 0; i < names.length; i++)
            {
                filters += "firstname eq '*"+names[i]+"*' or lastname eq '*"+names[i]+"*' or "
            }
            filters = filters.slice(0, -3);
            Router.redirect("residents/"+filters);
        };

    </script>
  </div>
</div>
</app-residents>
